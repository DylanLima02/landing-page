<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Planejador Completo</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
 --bg:#f6f8fc;--card:#fff;--text:#202124;--line:#e0e0e0;--primary:#1a73e8
}
[data-theme="dark"]{
 --bg:#121212;--card:#1e1e1e;--text:#f1f1f1;--line:#333
}
body{font-family:Arial;background:var(--bg);color:var(--text)}
.app{display:grid;grid-template-columns:260px 1fr;height:100vh}
.sidebar{background:var(--card);border-right:1px solid var(--line);padding:16px}
.sidebar button{width:100%;padding:10px;border-radius:24px;border:none;background:var(--primary);color:#fff;font-weight:bold;cursor:pointer;margin-bottom:10px}
.sidebar .view{cursor:pointer;margin:6px 0}
.content{display:flex;flex-direction:column}
.header{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background:var(--card);border-bottom:1px solid var(--line)}
.agenda{flex:1;overflow:auto;background:var(--card)}
.time-grid{display:grid;grid-template-columns:80px 1fr}
.hour{height:60px;border-bottom:1px solid var(--line);font-size:12px;text-align:right;padding:6px}
.grid{position:relative;height:1440px}
.line{position:absolute;left:0;right:0;height:1px;background:var(--line)}
.event{position:absolute;left:8px;right:8px;background:var(--primary);color:#fff;border-radius:6px;padding:6px;font-size:12px;cursor:grab}
.resize{position:absolute;bottom:0;left:0;right:0;height:6px;cursor:ns-resize;background:rgba(255,255,255,.3)}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;align-items:center;justify-content:center}
.modal-content{background:var(--card);padding:20px;border-radius:12px;width:300px}
.modal-content input{width:100%;margin-bottom:10px;padding:8px}
</style>
</head>
<body>
<div class="app" id="app">
<aside class="sidebar">
<button id="createBtn">+ Criar evento</button>
<div class="view" data-view="day">üìÖ Dia</div>
<div class="view" data-view="week">üìÜ Semana</div>
<div class="view" data-view="month">üóìÔ∏è M√™s</div>
<button id="themeBtn">üåô Tema</button>
</aside>
<main class="content">
<div class="header">
<div id="dateLabel"></div>
<div>
<button id="prev">‚óÄ</button>
<button id="today">Hoje</button>
<button id="next">‚ñ∂</button>
</div>
</div>
<div class="agenda" id="agenda"></div>
</main>
</div>

<div class="modal" id="modal">
<div class="modal-content">
<h3>Novo evento</h3>
<input id="title" placeholder="T√≠tulo" />
<input id="start" type="time" />
<input id="end" type="time" />
<button onclick="saveEvent()">Salvar</button>
</div>
</div>

<script>
let state={view:'day',date:new Date(),events:JSON.parse(localStorage.getItem('events')||'[]')}
const agenda=document.getElementById('agenda')
const dateLabel=document.getElementById('dateLabel')
const modal=document.getElementById('modal')

function render(){agenda.innerHTML='';dateLabel.textContent=state.date.toLocaleDateString();
 if(state.view==='day')renderDay();
 if(state.view==='week')agenda.innerHTML='<h2 style="padding:20px">Vis√£o Semana (base pronta)</h2>';
 if(state.view==='month')agenda.innerHTML='<h2 style="padding:20px">Vis√£o M√™s (base pronta)</h2>';
}

function renderDay(){
 const grid=document.createElement('div');grid.className='time-grid'
 const hours=document.createElement('div');
 const slots=document.createElement('div');slots.className='grid'
 for(let h=0;h<24;h++){const d=document.createElement('div');d.className='hour';d.textContent=`${h}:00`;hours.appendChild(d)}
 for(let i=0;i<96;i++){const l=document.createElement('div');l.className='line';l.style.top=i*15+'px';slots.appendChild(l)}
 state.events.filter(e=>e.date===state.date.toISOString().slice(0,10)).forEach(e=>{
  const ev=document.createElement('div');
  const s=toMin(e.start),en=toMin(e.end)
  ev.className='event';ev.style.top=s+'px';ev.style.height=(en-s)+'px';
  ev.innerHTML=`${e.title}<div class="resize"></div>`;enableDrag(ev,e);enableResize(ev,e)
  slots.appendChild(ev)
 })
 grid.append(hours,slots);agenda.appendChild(grid)
}

function toMin(t){const[p,m]=t.split(':');return +p*60+ +m}

function openModal(){modal.style.display='flex'}
function saveEvent(){
 state.events.push({id:Date.now(),title:title.value,start:start.value,end:end.value,date:state.date.toISOString().slice(0,10)})
 localStorage.setItem('events',JSON.stringify(state.events));modal.style.display='none';render()
}

function enableDrag(el,e){let y;el.onmousedown=a=>{if(a.target.classList.contains('resize'))return;y=a.clientY;document.onmousemove=b=>{const d=Math.round((b.clientY-y)/15)*15;const dur=toMin(e.end)-toMin(e.start);const ns=toMin(e.start)+d;if(ns>=0){e.start=minTo(ns);e.end=minTo(ns+dur);render()}};document.onmouseup=()=>{document.onmousemove=null;localStorage.setItem('events',JSON.stringify(state.events))}}
}
function enableResize(el,e){el.querySelector('.resize').onmousedown=a=>{a.stopPropagation();let y=a.clientY;document.onmousemove=b=>{const d=Math.round((b.clientY-y)/15)*15;const ne=toMin(e.end)+d;if(ne>toMin(e.start)){e.end=minTo(ne);render()}};document.onmouseup=()=>{document.onmousemove=null;localStorage.setItem('events',JSON.stringify(state.events))}}
}
function minTo(m){return String(Math.floor(m/60)).padStart(2,'0')+':'+String(m%60).padStart(2,'0')}

createBtn.onclick=openModal
today.onclick=()=>{state.date=new Date();render()}
prev.onclick=()=>{state.date.setDate(state.date.getDate()-1);render()}
next.onclick=()=>{state.date.setDate(state.date.getDate()+1);render()}
document.querySelectorAll('.view').forEach(v=>v.onclick=()=>{state.view=v.dataset.view;render()})
themeBtn.onclick=()=>document.body.dataset.theme=document.body.dataset.theme?'':'dark'

render()
</script>
</body>
</html>
